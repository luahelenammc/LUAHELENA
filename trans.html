<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Transi√ß√£o Moon üåô</title>
  <link rel="icon" type="image/x-icon" href="/images/transb.fw.png">

  <style>
    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    :root{
      --blue:#55CDFC; --pink:#F7A8B8; --white:#FFFFFF;

      --bgGlass: rgba(0,0,0,.26);
      --glassStroke: rgba(255,255,255,.20);

      --cardTop:#1a1f25; --cardMid:#14181d; --cardBot:#101419;
      --label:#1a1a1a;
      --text:#eef3f8;

      --accent:#ff57ba; /* default, cada se√ß√£o sobrescreve */
    }

    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, "Noto Sans", Arial, sans-serif;
      font-variant-numeric: tabular-nums lining-nums;

      background:
        linear-gradient(180deg,
          var(--blue) 0%,
          var(--blue) 20%,
          var(--pink) 20%,
          var(--pink) 40%,
          var(--white) 40%,
          var(--white) 60%,
          var(--pink) 60%,
          var(--pink) 80%,
          var(--blue) 80%,
          var(--blue) 100%
        );

      display:flex;
      justify-content:center;
      padding: 28px 14px 44px;
      overflow-x:hidden;
      color:#111;
    }

    .wrap{
      width:min(860px, 100%);
      display:flex;
      flex-direction:column;
      gap: 22px;
    }

    .panel{
      background: var(--bgGlass);
      border: 1px solid var(--glassStroke);
      border-radius: 26px;
      padding: 18px 14px 16px;
      box-shadow: 0 22px 70px rgba(0,0,0,.22);
      backdrop-filter: blur(10px);
    }

    .head{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .title{
      background: rgba(0,0,0,.80);
      color:#fff;
      border: 1px solid rgba(255,255,255,.20);
      box-shadow: 0 18px 50px rgba(0,0,0,.22);
      padding: 14px 18px;
      border-radius: 18px;
      font-size: 34px;
      letter-spacing:.2px;
      text-align:center;
      max-width: 96%;
    }

    .sub{
      font-size: 13px;
      color: rgba(0,0,0,.75);
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(255,255,255,.55);
      padding: 8px 12px;
      border-radius: 999px;
      max-width: 96%;
      text-align:center;
    }

    /* --- IMPORTADO/ADAPTADO DO SEU FLIP CLOCK (visual) --- */
    .row{
      display:flex;
      gap: 1.1rem;
      flex-wrap:wrap;
      align-items:flex-start;
      justify-content:center;
      perspective: 1200px;
      padding: 10px 0 4px;
    }

    .digit-group{
      display:inline-flex;
      align-items:center;
      gap: .55rem;
      user-select:none;
    }

    .group-label{
      font-size: .85rem;
      letter-spacing: .12em;
      text-transform: uppercase;
      color: rgba(0,0,0,.78);
      background: rgba(255,255,255,.62);
      border: 1px solid rgba(255,255,255,.55);
      padding: .35rem .55rem;
      border-radius: 10px;
      box-shadow: 0 10px 22px rgba(0,0,0,.12);
    }

    .digit{
      width: 110px;
      height: 140px;
      perspective: 1000px;
      position: relative;
      border-radius: 14px;
      filter: drop-shadow(0 18px 36px rgba(0,0,0,.42));
    }

    .digit::before{
      content:"";
      position:absolute;
      inset:-6px;
      border-radius:18px;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,0) 28%, rgba(0,0,0,.45) 100%);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.10), 0 2px 8px rgba(0,0,0,.35);
      pointer-events:none;
    }

    .flip-container{
      width:100%;
      height:100%;
      position:relative;
      transform-style:preserve-3d;
      transition: transform 460ms cubic-bezier(.22,.61,.36,1);
      will-change: transform;
      border-radius:14px;
      overflow:hidden;
    }

    .flip-front,.flip-back{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:3.35rem;
      font-weight:900;
      letter-spacing:.02em;
      color:var(--text);
      text-shadow: 0 1px 0 rgba(0,0,0,.75), 0 2px 10px rgba(0,0,0,.45);
      backface-visibility:hidden;

      background:
        radial-gradient(120% 100% at 50% 0%, rgba(255,255,255,.06), rgba(255,255,255,0) 60%),
        linear-gradient(180deg, var(--cardTop) 0%, var(--cardMid) 52%, var(--cardBot) 100%),
        repeating-linear-gradient(90deg, rgba(255,255,255,.035) 0 2px, rgba(255,255,255,0) 2px 4px);

      border-radius:14px;
      border:1px solid rgba(255,255,255,.06);
      box-shadow:
        inset 0 16px 30px rgba(255,255,255,.05),
        inset 0 -22px 44px rgba(0,0,0,.65),
        inset 0 0 0 1px rgba(0,0,0,.65),
        0 0 0 2px color-mix(in oklab, var(--accent) 26%, transparent);
    }

    .flip-front::before,.flip-back::before{
      content:"";
      position:absolute;
      inset:0;
      border-radius:14px;
      background:
        linear-gradient(180deg, transparent calc(50% - 1px), rgba(255,255,255,.12) calc(50% - 1px), rgba(0,0,0,.65) 50%, transparent calc(50% + 2px)),
        radial-gradient(8px 8px at 12px 12px, rgba(255,255,255,.45), rgba(255,255,255,0) 70%),
        radial-gradient(8px 8px at calc(100% - 12px) 12px, rgba(255,255,255,.45), rgba(255,255,255,0) 70%),
        radial-gradient(8px 8px at 12px calc(100% - 12px), rgba(255,255,255,.45), rgba(255,255,255,0) 70%),
        radial-gradient(8px 8px at calc(100% - 12px) calc(100% - 12px), rgba(255,255,255,.45), rgba(255,255,255,0) 70%);
      pointer-events:none;
    }

    .flip-front::after,.flip-back::after{
      content:"";
      position:absolute;
      inset:0;
      border-radius:14px;
      background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 26%, transparent), rgba(255,255,255,0) 28%);
      mix-blend-mode: screen;
      pointer-events:none;
    }

    .flip-back{ transform: rotateX(180deg); }
    .digit.flipped .flip-container{ transform: rotateX(180deg); }

    /* responsivo */
    @media (max-width: 900px){
      .digit{ width: 98px; height: 126px; }
      .flip-front,.flip-back{ font-size: 3.0rem; }
    }
    @media (max-width: 520px){
      .title{ font-size: 30px; }
      .digit{ width: 88px; height: 116px; }
      .flip-front,.flip-back{ font-size: 2.7rem; }
    }

    /* acentos por se√ß√£o */
    .social{ --accent:#ee8aff; }
    .hormonal{ --accent:#ff57ba; }
  </style>
</head>

<body>
  <div class="wrap">

    <section class="panel social">
      <div class="head">
        <div class="title">Transi√ß√£o Social</div>
        <div class="sub">In√≠cio: 01/06/2024</div>
      </div>

      <div class="row">
        <div class="digit-group">
          <div class="digit" id="socialYears" data-value="00">
            <div class="flip-container">
              <div class="flip-front">00</div><div class="flip-back">00</div>
            </div>
          </div>
          <div class="group-label">Anos</div>
        </div>

        <div class="digit-group">
          <div class="digit" id="socialMonths" data-value="00">
            <div class="flip-container">
              <div class="flip-front">00</div><div class="flip-back">00</div>
            </div>
          </div>
          <div class="group-label">Meses</div>
        </div>

        <div class="digit-group">
          <div class="digit" id="socialDays" data-value="00">
            <div class="flip-container">
              <div class="flip-front">00</div><div class="flip-back">00</div>
            </div>
          </div>
          <div class="group-label">Dias</div>
        </div>
      </div>
    </section>

    <section class="panel hormonal">
      <div class="head">
        <div class="title">Transi√ß√£o Hormonal (efetiva)</div>
        <div class="sub">In√≠cio: 06/09/2024 ¬∑ pausa descontada: 3 semanas em set/2025</div>
      </div>

      <div class="row">
        <div class="digit-group">
          <div class="digit" id="hormonalYears" data-value="00">
            <div class="flip-container">
              <div class="flip-front">00</div><div class="flip-back">00</div>
            </div>
          </div>
          <div class="group-label">Anos</div>
        </div>

        <div class="digit-group">
          <div class="digit" id="hormonalMonths" data-value="00">
            <div class="flip-container">
              <div class="flip-front">00</div><div class="flip-back">00</div>
            </div>
          </div>
          <div class="group-label">Meses</div>
        </div>

        <div class="digit-group">
          <div class="digit" id="hormonalDays" data-value="00">
            <div class="flip-container">
              <div class="flip-front">00</div><div class="flip-back">00</div>
            </div>
          </div>
          <div class="group-label">Dias</div>
        </div>
      </div>
    </section>

  </div>

  <script>
    // ----------------- FLIP (igual ao seu) -----------------
    function flipDigit(digitElem, newVal){
      const oldVal = digitElem.getAttribute("data-value");
      if (String(newVal) === String(oldVal)) return;

      const frontElem = digitElem.querySelector(".flip-front");
      const backElem  = digitElem.querySelector(".flip-back");

      backElem.textContent  = newVal;
      frontElem.textContent = oldVal;

      digitElem.classList.add("flipped");
      setTimeout(() => {
        digitElem.classList.remove("flipped");
        frontElem.textContent = newVal;
        digitElem.setAttribute("data-value", newVal);
      }, 460);
    }

    // ----------------- TEMPO EFETIVO (com pausas) -----------------
    const DAY_MS = 24 * 60 * 60 * 1000;
    const AVG_MONTH = 30.436875; // m√™s m√©dio
    const AVG_YEAR_MONTHS = 12;

    function parseLocalYMD(ymd){
      const [y,m,d] = ymd.split("-").map(Number);
      return new Date(y, m-1, d);
    }

    function dayNumber(date){
      return Math.floor(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()) / DAY_MS);
    }

    // >>> AJUSTE AQUI QUANDO LEMBRAR AS DATAS EXATAS <<<
    // 3 semanas = 21 dias (inclusive)
    const PAUSAS_HORMONAIS = [
      { start: "2025-09-01", end: "2025-09-21" }
    ];

    function pausasParaDias(pausas){
      return pausas.map(p => {
        const s = parseLocalYMD(p.start);
        const e = parseLocalYMD(p.end);
        return {
          startDay: dayNumber(s),
          endExDay: dayNumber(new Date(e.getFullYear(), e.getMonth(), e.getDate() + 1))
        };
      });
    }

    const PAUSAS_HORMONAIS_DIAS = pausasParaDias(PAUSAS_HORMONAIS);

    function calcularDiasEfetivos(inicioYMD, pausasDias){
      const inicio = parseLocalYMD(inicioYMD);
      const hoje = new Date();

      const startDay = dayNumber(inicio);
      const nowDay = dayNumber(hoje);

      let total = Math.max(0, nowDay - startDay);
      if (!pausasDias || pausasDias.length === 0) return total;

      let pausados = 0;
      for (const r of pausasDias){
        const overlapStart = Math.max(startDay, r.startDay);
        const overlapEndEx = Math.min(nowDay, r.endExDay);
        pausados += Math.max(0, overlapEndEx - overlapStart);
      }
      return Math.max(0, total - pausados);
    }

    // Converte dias -> anos, meses (0-11), dias (resto)
    function splitYearsMonthsDays(totalDays){
      const monthsTotal = Math.floor(totalDays / AVG_MONTH);
      const years = Math.floor(monthsTotal / AVG_YEAR_MONTHS);
      const months = monthsTotal % AVG_YEAR_MONTHS;

      const daysRemainder = Math.max(0, Math.floor(totalDays - (monthsTotal * AVG_MONTH)));
      return { years, months, days: daysRemainder };
    }

    function pad2(n){ return String(n).padStart(2,"0"); }

    function updateSection(prefix, totalDays){
      const { years, months, days } = splitYearsMonthsDays(totalDays);

      flipDigit(document.getElementById(prefix + "Years"),  pad2(years));
      flipDigit(document.getElementById(prefix + "Months"), pad2(months));
      flipDigit(document.getElementById(prefix + "Days"),   pad2(days));
    }

    function tick(){
      const socialDays = calcularDiasEfetivos("2024-06-01", []);
      updateSection("social", socialDays);

      const hormonalDays = calcularDiasEfetivos("2024-09-06", PAUSAS_HORMONAIS_DIAS);
      updateSection("hormonal", hormonalDays);
    }

    tick();
    setInterval(tick, 1000);
  </script>
</body>
</html>
