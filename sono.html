<!doctype html>

<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Registro de Melatonina â€” Moon</title>
  <style>
    :root{
      --bg:#e6e3dd;
      --card:#f6f4f2;
      --accent:#f4c2c2;
      --shadow-outer: 16px 16px 30px rgba(0,0,0,0.18);
      --shadow-inner: inset 6px 6px 12px rgba(0,0,0,0.12);
      font-family: Inter, 'Helvetica Neue', Arial, sans-serif;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#e6e3dd 0%, #d7d3cc 100%);color:#222}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:24px}.card{width:100%;max-width:960px;background:var(--card);border-radius:20px;padding:24px;box-shadow:var(--shadow-outer),0 1px 0 rgba(255,255,255,0.6) inset;overflow:hidden}
h1{margin:0;font-size:20px}
p.sub{margin:4px 0 18px;color:#666;font-size:13px}

.grid{display:flex;flex-wrap:wrap;gap:16px}
.panel{background:linear-gradient(180deg,#f8f6f4 0%, #efeae8 100%);border-radius:14px;padding:16px;box-shadow:var(--shadow-inner);flex:1 1 340px;min-width:280px}

label{display:block;font-size:13px;color:#333;margin-bottom:6px}
input[type=date], input[type=time], select, textarea{width:100%;padding:10px;border-radius:10px;border:none;outline:none;background:#fff;box-shadow:3px 3px 8px rgba(0,0,0,0.06) inset;font-size:14px}

.btn{display:inline-flex;align-items:center;gap:6px;padding:10px 14px;border-radius:12px;border:none;background:linear-gradient(180deg,#f3d8d8,#eaaeb0);box-shadow:6px 6px 10px rgba(0,0,0,0.16);cursor:pointer;font-weight:600}
.btn.small{padding:8px 10px;font-size:13px}

.dosage{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
.dosage input{display:none}
.dosage label{padding:8px 10px;border-radius:10px;background:#fff;box-shadow:3px 3px 8px rgba(0,0,0,0.06);cursor:pointer;font-weight:600}
.dosage input:checked + label{background:linear-gradient(180deg,#ffd0d0,#ff9494);box-shadow:6px 6px 12px rgba(0,0,0,0.14)}

.preview{background:#fff;padding:12px;border-radius:10px;min-height:52px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px}
.code{font-family:monospace;font-size:14px;white-space:pre-wrap;color:#111;word-break:break-word;flex:1}
.copy-hint{font-size:12px;color:#666}

@media(max-width:600px){.grid{flex-direction:column}.btn{width:100%;justify-content:center}}

  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Registro de Melatonina ðŸŒ™</h1>
      <p class="sub">Selecione data/hora, dose, (opcional) baseados e gere a linha â€” a cÃ³pia acontece automaticamente.</p><div class="grid">
    <div class="panel">
      <label>Data</label>
      <input id="date" type="date">
      <label>Hora</label>
      <input id="time" type="time">
      <button id="nowBtn" class="btn small" style="margin-top:8px">Agora âŒš</button>

      <label style="margin-top:12px">Dosagem de melatonina</label>
      <div class="dosage" role="radiogroup" aria-label="Dosagem de melatonina">
        <input type="radio" id="d0" name="dose" value="0" checked><label for="d0">0</label>
        <input type="radio" id="d14" name="dose" value="1/4"><label for="d14">1/4</label>
        <input type="radio" id="d13" name="dose" value="1/3"><label for="d13">1/3</label>
        <input type="radio" id="d12" name="dose" value="1/2"><label for="d12">1/2</label>
        <input type="radio" id="d1" name="dose" value="1"><label for="d1">1</label>
      </div>

      <label style="margin-top:12px">Uso de baseados (opcional)</label>
      <div class="dosage" role="radiogroup" aria-label="Quantidade de baseados">
        <input type="radio" id="b0" name="joints" value="0" checked><label for="b0">0</label>
        <input type="radio" id="b1" name="joints" value="1"><label for="b1">1</label>
        <input type="radio" id="b2" name="joints" value="2"><label for="b2">2</label>
      </div>

      <label style="margin-top:10px">AtÃ© que hora</label>
      <select id="jointCutoff">
        <option value="">â€” selecione â€”</option>
        <option value="18">antes das 18h</option>
        <option value="19">antes das 19h</option>
        <option value="20">antes das 20h</option>
        <option value="21">antes das 21h</option>
        <option value="22">antes das 22h</option>
      </select>

      <label style="margin-top:12px">ObservaÃ§Ã£o (opcional)</label>
      <textarea id="note" rows="3" placeholder="ex: Dormi melhor..." style="width:100%"></textarea>

      <button id="generate" class="btn" style="margin-top:12px">Gerar e Copiar</button>
    </div>

    <div class="panel">
      <label>Ãšltimo cÃ³digo</label>
      <div class="preview"><div class="code" id="generated">Nenhum ainda</div><div class="copy-hint" id="copiedHint" style="opacity:0;transition:opacity .2s">Copiado!</div></div>
    </div>
  </div>
</div>

  </div>  <script>
    const $ = sel=>document.querySelector(sel);
    function pad(n){return n.toString().padStart(2,'0')}
    function setNow(){let d=new Date();$('#date').value=`${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;$('#time').value=`${pad(d.getHours())}:${pad(d.getMinutes())}`;}

    $('#nowBtn').onclick=setNow;

    function getDose(){return document.querySelector('input[name=dose]:checked').value;}
    function getJoints(){return document.querySelector('input[name=joints]:checked').value;}

    async function copyText(txt){
      try{await navigator.clipboard.writeText(txt);return true}
      catch{let t=document.createElement('textarea');t.value=txt;document.body.appendChild(t);t.select();document.execCommand('copy');t.remove();return true}
    }

    function showCopied(){let h=$('#copiedHint');h.style.opacity=1;setTimeout(()=>h.style.opacity=0,1500)}

    $('#generate').onclick=async()=>{
      const date=$('#date').value,time=$('#time').value;
      if(!date||!time){alert('Insira data e hora');return;}
      const [y,m,d]=date.split('-');
      const base = `${d}/${m}/${y} ${time} â€¢ Melatonina: ${getDose()}`;

      const joints = getJoints();
      const cutoff = $('#jointCutoff').value;
      let jointText = '';
      if(joints === '0'){
        jointText = ' â€¢ Baseados: 0';
      } else {
        jointText = ` â€¢ Baseados: ${joints}${cutoff?` (antes das ${cutoff}h)`:''}`;
      }

      const note = $('#note').value ? ` â€¢ ${$('#note').value}` : '';
      const out = base + jointText + note;
      $('#generated').textContent=out;
      await copyText(out);showCopied();
    }

    setNow();
  </script></body>
</html>
